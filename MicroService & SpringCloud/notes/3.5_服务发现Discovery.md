[TOC]

# CAP概念原理

CAP原理指的是在一个分布式系统中，Consistency（一致性）、 Availability（可用性）、 Partition tolerance（分区容错性），最多只能同时三个特性中的两个，三者不可兼得。

一致性指：在一致性的需求下，当一个系统在数据一致的状态下执行更新操作后，应该保证系统 的数据仍然处于一致的状态。

可用性是指：系统提供的服务必须一直处于可用的状态，对于用户的每一个操作请求总是能够在 有限的时间内返回结果。

分区容错性指：分布式系统在遇到任何网络分区故障的时候，仍然需要能够保证对外提供满足一 致性和可用性的服务，除非是整个网络环境都发生了故障 。

zk集群保证了CP、redis集群保证了AP：

因此在实现分布式锁的时候，如果使用zk实现，那 么当master宕机之后，集群需要重新进行选举，此时集群短暂不可用。而如果使用redis实现分布 式锁，因为redis保证AP，所有当master宕机之后，如果master数据没同步，可能会产生数据一 致性的问题，，导致有多个应用获取到分布式锁。

# 服务发现Discovery

## 什么是服务发现？
服务消费者调用微服务之前，需要向服务注册中心，获取注册服务列表及服务信息。这个过程就是“服务发现”
服务发现 -客户端应用程序查询中央注册表以了解服务位置的过程。
对于注册进eureka里面的微服务，可以通过服务发现来获得该服务的信息
服务发现就是程序如何通过一个标志来获取服务列表，并且这个服务列表是能够随着服务的状态而动态变更的。

# 